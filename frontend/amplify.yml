version: 1
applications:
  - frontend:
      phases:
        preBuild:
          commands:
            - npm ci
        build:
          commands:
            - npm run build
      artifacts:
        baseDirectory: .next
        files:
          - '**/*'
      cache:
        paths:
          - node_modules/**/*
    appRoot: frontend

# ---------------------------------------------------------------------------
# Monorepo deployment: Amplify builds from the "frontend/" subdirectory.
# The appRoot key sets the working directory, so no "cd frontend" needed
# and all paths (baseDirectory, cache) are relative to frontend/.
#
# Environment variable â€” set in Amplify console under App Settings > Environment Variables:
#   NEXT_PUBLIC_API_URL = https://YOUR-SERVICE.REGION.awsapprunner.com
# ---------------------------------------------------------------------------
