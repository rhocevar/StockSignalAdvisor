version: 1.0
runtime: python311

build:
  commands:
    build:
      - pip install --no-cache-dir -r requirements.txt

run:
  runtime-version: 3.11
  command: uvicorn app.main:app --host 0.0.0.0 --port 8080
  network:
    port: 8080
    env: PORT
  env:
    - name: ENVIRONMENT
      value: production
    - name: LOG_LEVEL
      value: INFO

# ---------------------------------------------------------------------------
# Secrets â€” configure these in the App Runner console under Environment Variables
# (never commit API keys to source control)
# ---------------------------------------------------------------------------
# LLM_PROVIDER          = openai
# LLM_MODEL             = gpt-4o-mini
# OPENAI_API_KEY        = sk-...
# VECTORSTORE_PROVIDER  = pinecone
# PINECONE_API_KEY      = ...
# PINECONE_INDEX_NAME   = stock-signal-advisor
# NEWS_API_KEY          = ...
# CACHE_TTL_SECONDS     = 3600
# CORS_ORIGINS          = ["https://main.XXXXXXXX.amplifyapp.com","http://localhost:3000"]
#
# Update CORS_ORIGINS with the actual Amplify app URL after Amplify is deployed.
